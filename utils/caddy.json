{
  "apps": {
    "http": {
      "servers": {
        "srv0": {
          "listen": [":80"],
          "routes": [
            {
              "match": [
                {
                  "host": ["nmaa.com"]
                }
              ],
              "handle": [
                {
                  "handler": "reverse_proxy",
                  "upstreams": [
                    {
                      "dial": "127.0.0.1:3000"
                    }
                  ]
                }
              ]
            },
            {
              "match": [
                {
                  "host": ["auth.nmaa.com"]
                }
              ],
              "handle": [
                {
                  "handler": "reverse_proxy",
                  "upstreams": [
                    {
                      "dial": "127.0.0.1:5001"
                    }
                  ]
                }
              ]
            },
            {
              "match": [
                {
                  "host": ["resource.nmaa.com"]
                }
              ],
              "handle": [
                {
                  "handler": "headers",
                  "response": {
                    "set": {
                      "Access-Control-Allow-Origin": ["http://nmaa.com"],
                      "Access-Control-Allow-Methods": [
                        "GET, POST, PUT, DELETE, OPTIONS"
                      ],
                      "Access-Control-Allow-Headers": [
                        "Content-Type, Authorization"
                      ],
                      "Access-Control-Allow-Credentials": ["true"]
                    }
                  }
                },
                {
                  "handler": "reverse_proxy",
                  "upstreams": [
                    {
                      "dial": "127.0.0.1:5002"
                    }
                  ]
                }
              ]
            }
          ]
        }
      }
    }
  }
}
