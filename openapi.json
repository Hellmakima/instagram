{"openapi":"3.1.0","info":{"title":"Auth Server","version":"0.1"},"paths":{"/v1/auth/csrf-token":{"get":{"tags":["v1","Core Auth"],"summary":"Generate Csrf Token","operationId":"generate_csrf_token_v1_auth_csrf_token_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}}}}},"/v1/auth/register":{"post":{"tags":["v1","Core Auth"],"summary":"Register","operationId":"register_v1_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"403":{"description":"Forbidden (CSRF error)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/login":{"post":{"tags":["v1","Core Auth"],"summary":"Login with username/password","operationId":"login_v1_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginForm"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/auth/logout":{"post":{"tags":["v1","Core Auth"],"summary":"Logout user","operationId":"logout_v1_auth_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}}}}},"/v1/auth/refresh_token":{"post":{"tags":["v1","Core Auth"],"summary":"Rotate access token","operationId":"refresh_access_token_v1_auth_refresh_token_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}}}}},"/v1/users/{username}":{"get":{"tags":["v1","User Management"],"summary":"Get User By Username","description":"Get user_id by username.","operationId":"get_user_by_username_v1_users__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenData"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/email/send-verification-email":{"get":{"tags":["v1","Email/Phone Verification"],"summary":"Send Verification Email","description":"Generates a verification token and sends the verification email to the user.","operationId":"send_verification_email_v1_email_send_verification_email_get","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Id"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SuccessMessageResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"403":{"description":"Forbidden (CSRF error)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"500":{"description":"Internal Server Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/APIErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/email/verify-email":{"get":{"tags":["v1","Email/Phone Verification"],"summary":"Verify Email","description":"Verify an email verification token and mark user as verified.","operationId":"verify_email_v1_email_verify_email_get","parameters":[{"name":"token","in":"query","required":true,"schema":{"type":"string","title":"Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"APIErrorResponse":{"properties":{"success":{"type":"boolean","title":"Success","description":"Indicates failure","default":false},"message":{"type":"string","title":"Message","description":"Message of the response","default":"Error"},"error":{"anyOf":[{"$ref":"#/components/schemas/ErrorDetail"},{"type":"null"}]}},"type":"object","title":"APIErrorResponse"},"ErrorDetail":{"properties":{"code":{"type":"string","title":"Code","description":"Error code","default":"UNKNOWN_ERROR"},"details":{"type":"string","title":"Details","description":"Details of the error","default":"No details provided"}},"type":"object","title":"ErrorDetail"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"Id":{"properties":{"id":{"type":"string","title":"Id","description":"Unique ID of the user"}},"type":"object","required":["id"],"title":"Id","description":"Contains valid user IDs.\nmaybe if not provided, it will be generated. (check implementation)"},"LoginForm":{"properties":{"username_or_email":{"type":"string","title":"Username Or Email","description":"Username or email of the user"},"password":{"type":"string","title":"Password","description":"Password of the user"},"user_agent":{"type":"string","title":"User Agent","description":"User agent string of the client"}},"type":"object","required":["username_or_email","password","user_agent"],"title":"LoginForm"},"SuccessMessageResponse":{"properties":{"success":{"type":"boolean","title":"Success","default":true},"message":{"type":"string","title":"Message","description":"Message of the response","default":"Success"},"data":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Data"}},"type":"object","title":"SuccessMessageResponse"},"TokenData":{"properties":{"exp":{"type":"string","format":"date-time","title":"Exp","description":"Token expiration date"},"sub":{"$ref":"#/components/schemas/TokenSub","description":"Token data"},"type":{"type":"string","title":"Type","description":"Token type"}},"type":"object","required":["exp","sub","type"],"title":"TokenData"},"TokenSub":{"properties":{"id":{"type":"string","title":"Id","description":"Unique ID of the user"}},"type":"object","required":["id"],"title":"TokenSub"},"UserCreate":{"properties":{"password":{"type":"string","maxLength":72,"minLength":10,"title":"Password","description":"Raw password (will be hashed)"},"username":{"type":"string","maxLength":20,"minLength":4,"title":"Username","description":"Username of the user"},"email":{"type":"string","title":"Email","description":"Email of the user"}},"type":"object","required":["password","username","email"],"title":"UserCreate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}